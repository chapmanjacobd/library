[project]
requires-python = ">=3.8"

[project.optional-dependencies]
dev = ["black", "ipdb", "ruff", "isort", "pytest", "scalene", "ssort"]
full = ["textract", "PyExifTool", "aiohttp", "brotab", "orjson", "pandas"]

[build-system]
build-backend = "poetry.core.masonry.api"
requires = ["poetry-core>=1.0.0"]

[tool.poetry]
authors = ["Jacob Chapman <7908073+chapmanjacobd@users.noreply.github.com>"]
description = "xk library"
documentation = "https://github.com/chapmanjacobd/library/wiki/Usage"
homepage = "https://github.com/chapmanjacobd/library/"
include = ["assets/*"]
license = "BSD-3-Clause"
name = "xklb"
packages = [
  {include = "scripts/mining/"},
  {include = "scripts/"},
  {include = "xklb/"},
]
readme = "README.md"
version = "1.26.001"

[tool.poetry.dependencies]
python = "^3.8"
sqlite-utils = ">=3.30"
# protobuf = "<4"
Markdown = "*"
catt = "*"
ffmpeg-python = "*"
ftfy = "*"
gallery-dl = "*"
humanize = "*"
ipython = "*"
joblib = "*"
mutagen = "*"
natsort = "*"
praw = "*"
pysubs2 = "*"
python-mpv-jsonipc = "*"
regex = "*"
rich = "*"
screeninfo = "*"
subliminal = "*"
tabulate = "*"
tinytag = "*"
yt-dlp = "*"

[tool.poetry.scripts]
lb = 'xklb.lb:library'
library = 'xklb.lb:library'

[tool.black]
line-length = 120
target-version = ['py38', 'py39', 'py310']

[tool.isort]
atomic = true
combine_straight_imports = true
float_to_top = true
group_by_package = true
line_length = 120
profile = "black"

[tool.ruff.per-file-ignores]
"__init__.py" = ["F401"]
"tests/*" = ["ANN201", "PLR2004"]

[tool.ruff]
ignore = [
  "ANN001",
  "ANN002",
  "ANN101",
  "D100",
  "D101",
  "D102",
  "D103",
  "D211",
  "D212",
  "E401",
  "E501",
  "ERA001",
  "I001",
  "PGH003","PLW2901",
  "RET504",
  "RUF001",
  "S101",
  "S311",
  "SIM105",
]
line-length = 120
select = ["ALL"]
# Allow unused variables when underscore-prefixed.
dummy-variable-rgx = "^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$"
show-fixes = true

[tool.pytest.ini_options]
addopts = "--pdbcls=IPython.terminal.debugger:TerminalPdb --ignore=tests/data --capture=tee-sys --log-cli-level=ERROR"
testpaths = ['tests']
